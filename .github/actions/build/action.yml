name: Build Rails app
description: Build a Rails app
inputs:
  node-version-file:
    description: 'Node version file'
    required: false
    default: '.nvmrc'
runs:
  using: "composite"
  steps:
    - name: Set up Ruby
      uses: ruby/setup-ruby@v1
      with:
        bundler-cache: true
    - name: Set up Node
      uses: actions/setup-node@v3
      with:
        node-version-file: ${{ inputs.node-version-file }}
        cache: 'yarn'
      if: ${{ env.node_present == 'true' }}
    - name: Install JS dependencies
      run: yarn install --prefer-offline --frozen-lockfile
      shell: bash
      if: ${{ env.js_modules_present == 'true' }}
